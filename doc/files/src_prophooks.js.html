<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\prophooks.js - animatePaper.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="animatePaper.js" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/_tweenPropHooks.html">_tweenPropHooks</a></li>
                                <li><a href="../classes/animatePaper.html">animatePaper</a></li>
                                <li><a href="../classes/Animation.html">Animation</a></li>
                                <li><a href="../classes/easing.html">easing</a></li>
                                <li><a href="../classes/frameManager.html">frameManager</a></li>
                                <li><a href="../classes/fx.html">fx</a></li>
                                <li><a href="../classes/Tween.html">Tween</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\prophooks.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 *  Performs an operation on two paper.Point() objects.
 *  Returns the result of : &#x60; a operator b&#x60;.
 *  @private
 *  @method _pointDiff
 *  @param {Object} a a &#x60;paper.Point&#x60; object
 *  @param {Object} b a &#x60;paper.Point&#x60; object
 *  @param {String} operator either &#x60;+&#x60; or &#x60;-&#x60;
 *  @return {Object} &#x60;{x: (a.x operator b.x), y: (a.y operator b.y)}&#x60;
 *  @for Tween
 */
function _pointDiff(a, b, operator) {
    if ([&#x27;+&#x27;, &#x27;-&#x27;].indexOf(operator) === -1) return;
    if (typeof a === &quot;undefined&quot; || typeof b === &quot;undefined&quot;) return;


    var ax, bx, ay, by;
    ax = a.x || 0;
    bx = b.x || 0;
    ay = a.y || 0;
    by = b.y || 0;
    var output = new paper.Point(
        eval(ax + operator + bx),
        eval(ay + operator + by)
    );

    return output;
}
// inspired by https://github.com/jquery/jquery/blob/10399ddcf8a239acc27bdec9231b996b178224d3/src/effects/Tween.js
/**
 *  Helpers to get, set and ease properties that behave differently from &quot;normal&quot; properties. e.g. &#x60;scale&#x60;.
 *  @class _tweenPropHooks
 *  @private
 *  @static
 */
var _tweenPropHooks = {
    _default: {
        get: function(tween) {
            var output;
            if (tween.item[tween.prop] != null) {
                output = tween.item[tween.prop];
            }

            return output;
        },
        set: function(tween) {

            var toSet = {};
            toSet[tween.prop] = tween.now;
            tween.item.set(toSet);
        }
    },
    scale: {
        get: function(tween) {
            if (!tween.item.data._animatePaperVals) {
                tween.item.data._animatePaperVals = {};
            }
            if (typeof tween.item.data._animatePaperVals.scale === &quot;undefined&quot;) {
                tween.item.data._animatePaperVals.scale = 1;
            }
            var output = tween.item.data._animatePaperVals.scale;
            return output;
        },
        set: function(tween) {

            var curScaling = tween.item.data._animatePaperVals.scale;
            var trueScaling = tween.now / curScaling;

            tween.item.data._animatePaperVals.scale = tween.now;
            tween.item.scale(trueScaling);
        }
    },
    rotate: {
        get: function(tween) {
            if (!tween.item.data._animatePaperVals) {
                tween.item.data._animatePaperVals = {};
            }
            if (typeof tween.item.data._animatePaperVals.rotate === &quot;undefined&quot;) {
                tween.item.data._animatePaperVals.rotate = -0;
            }
            var output = tween.item.data._animatePaperVals.rotate;
            return output;
        },
        set: function(tween) {
            var curRotate = tween.item.data._animatePaperVals.rotate;
            var trueRotate = tween.now - curRotate;

            tween.item.data._animatePaperVals.rotate = tween.now;
            tween.item.rotate(trueRotate);
        }
    },
    translate: {
        get: function(tween) {
            if (!tween.item.data._animatePaperVals) {
                tween.item.data._animatePaperVals = {};
            }
            if (typeof tween.item.data._animatePaperVals.translate === &quot;undefined&quot;) {
                tween.item.data._animatePaperVals.translate = new paper.Point(0, 0);
            }
            var output = tween.item.data._animatePaperVals.translate;

            return output;
        },
        set: function(tween) {
            var cur = tween.item.data._animatePaperVals.translate;
            var actual = _pointDiff(tween.now, cur, &quot;-&quot;);


            tween.item.data._animatePaperVals.translate = tween.now;

            tween.item.translate(actual);
        },
        ease: function(tween, eased) {

            var temp = _pointDiff(tween.end, tween.start, &quot;-&quot;);
            temp.x = temp.x * eased;
            temp.y = temp.y * eased;

            tween.now = _pointDiff(temp, tween.start, &quot;+&quot;);

            return tween.now;
        }
    },
    segmentGrow: {
        get: function(tween) {
            if (!(tween.item instanceof paper.Path)) {
                throw new Error(&quot;Only a Path object can be used with : segmentGrow&quot;);
            }


            var output = tween.item.lastSegment.point;
            return output;
        },
        set: function(tween) {

            tween.item.add(tween.now);
        },
        ease: function(tween, eased) {

            var temp = _pointDiff(tween.end, tween.start, &quot;-&quot;);
            temp.x = temp.x * eased;
            temp.y = temp.y * eased;

            tween.now = _pointDiff(temp, tween.start, &quot;+&quot;);

            return tween.now;
        }
    },
    position: {
        get: function(tween) {
            return {
                x: tween.item.position.x,
                y: tween.item.position.y
            };
        },
        set: function(tween) {

            tween.item.position.x += tween.now.x;
            tween.item.position.y += tween.now.y;
            
        },
        ease: function(tween, eased) {
            // If the values start with + or -,
            // the values are relative to the current pos
            var dirX = &quot;&quot;;
            var dirY = &quot;&quot;;
            var rX = null;
            var rY = null;

            // used to store value progess
            if(typeof tween._easePositionCache === &quot;undefined&quot;) {
                tween._easePositionCache = {
                    x: 0,
                    y: 0
                }
            }


            var endX = Number(tween.end.x || 0);
            var endY = Number(tween.end.y || 0);
            
            if(!!tween.end.x) var rX = (&quot;&quot;+tween.end.x).match(dirRegexp);
            if(!!tween.end.y) var rY = (&quot;&quot;+tween.end.y).match(dirRegexp);
            if(!!rX) {
                dirX = rX[1];
                endX = Number(rX[2]);
            }
            if(!!rY) {
                dirY = rY[1];
                endY = Number(rY[2]);
            }

            var _ease = function(val) {
                return ((val || 0) * eased);
            };

            if(typeof tween.end.x !== &quot;undefined&quot;) {
                if(dirX===&quot;+&quot;) {
                    tween.now.x = (_ease(endX) - tween._easePositionCache.x);
                    tween._easePositionCache.x += tween.now.x;
                }
                else if(dirX===&quot;-&quot;) {
                    tween.now.x = _ease(endX) - tween._easePositionCache.x;
                    tween._easePositionCache.x += tween.now.x;
                    tween.now.x = - tween.now.x;
                }
                else {
                    // absolute, not relative
                    tween.now.x = ((endY - tween.start.x) * eased) - tween._easePositionCache.x;
                    tween._easePositionCache.x += tween.now.x;
                }
            }
            else {
                tween.now.x = 0;
            }
            if(typeof tween.end.y !== &quot;undefined&quot;) {
                if(dirY===&quot;+&quot;) {
                    tween.now.y = _ease(endY) - tween._easePositionCache.y;
                    tween._easePositionCache.y += tween.now.y;
                }
                else if(dirY===&quot;-&quot;) {

                    tween.now.y = _ease(endY) - tween._easePositionCache.y;
                    tween._easePositionCache.y += tween.now.y;
                    tween.now.y = - tween.now.y;
                }
                else {
                    // absolute, not relative
                    tween.now.y = ((endY - tween.start.y) * eased) - tween._easePositionCache.y;
                    tween._easePositionCache.y += tween.now.y;
                }
            }
            else {
                tween.now.y = 0;
            }
            
            return tween.now;
        }
    },
    Color: {
            get: function(tween) {
                return {
                    hue: tween.item[tween.prop].hue,
                    brightness: tween.item[tween.prop].brightness,
                    saturation: tween.item[tween.prop].saturation
                };
            },
            set: function(tween) {
                tween.item[tween.prop].hue += tween.now.hue;
                tween.item[tween.prop].brightness += tween.now.brightness;
                tween.item[tween.prop].saturation += tween.now.saturation;
            },
            ease: function(tween, eased) {
                var props = [ &quot;hue&quot;, &quot;brightness&quot;, &quot;saturation&quot; ];
                var _ease = function(val) {
                    return (val || 0) * eased;
                };
                for (var i = 0, l = props.length; i &lt; l; i++) {
                    var curProp = props[i];
                    var dir = &quot;&quot;;
                    var r = &quot;&quot;;
                    if (typeof tween._easeColorCache === &quot;undefined&quot;) {
                        tween._easeColorCache = {};
                    }
                    if (typeof tween._easeColorCache[curProp] === &quot;undefined&quot;) {
                        tween._easeColorCache[curProp] = 0;
                    }
                    var end = Number(tween.end[curProp] || 0);
                    if (!!tween.end[curProp]) var r = (&quot;&quot; + tween.end[curProp]).match(dirRegexp);
                    if (!!r) {
                        dir = r[1];
                        end = Number(r[2]);
                    }
                    if (typeof tween.end[curProp] !== &quot;undefined&quot;) {
                        if (dir === &quot;+&quot;) {
                            tween.now[curProp] = _ease(end) - tween._easeColorCache[curProp];
                            tween._easeColorCache[curProp] += tween.now[curProp];
                        } else if (dir === &quot;-&quot;) {
                            tween.now[curProp] = _ease(end) - tween._easeColorCache[curProp];
                            tween._easeColorCache[curProp] += tween.now[curProp];
                            tween.now[curProp] = -tween.now[curProp];
                        } else {
                            tween.now[curProp] = (end - tween.start[curProp]) * eased - tween._easeColorCache[curProp];
                            tween._easeColorCache[curProp] += tween.now[curProp];
                        }
                    } else {
                        tween.now[curProp] = 0;
                    }
                }
                return tween.now;
            }
        }
};
var _colorProperties = [ &quot;fill&quot;, &quot;stroke&quot; ];
for (var i = 0, l = _colorProperties.length; i &lt; l; i++) {
    _tweenPropHooks[_colorProperties[i] + &quot;Color&quot;] = _tweenPropHooks.Color;
}
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
